# Monkeydown

**Monkeydown** (or "Monkey Flavored Markdown") is an extension to the standard / pandoc markdown format, designed for easy web typesetting without heavy-lifting of HTML syntax.

*Note:* The reference implementation [`monkey.py`](https://github.com/soimort/soimort/blob/pandocfilters/monkey.py) is written in Python 3, implemented as a pandoc filter that filters ASTs generated by pandoc. Please be warned that there is no formal specification other than the reference implementation; and the implementation is not bugfree. If something works unexpectedly, it should be considered as a feature. (maybe just a misfeature!)

## Overview

Most formatting rules appear as *commands* in **Monkeydown**. A *command* is usually a string started with a colon "`:`".

### Text Alignment and Positioning

These commands are *block commands*. A *block command* applies to the consecutive paragraph thus must appear in the beginning of that paragraph.

#### `:left` (alternative forms `:l`, `:>`)

Left-align a paragraph.

#### `:right` (alternative forms `:r`, `:<`)

Right-align a paragraph.

#### `:center` (alternative forms `:c`, `:=`)

Center-align a paragraph.

Examples:

```
:r
This text is right-aligned.

:= This text is center-aligned.
```

These commands can also be used to create aligned headings:

```
:c,h1
I am a center-aligned Heading 1

:=## I am a center-aligned Heading 2

:<### I am a right-aligned Heading 3
```

#### `:left=` (alternative forms `:l=`, `:>=`)

Set the `left` CSS property of the paragraph to adjust its position.

#### `:right=` (alternative forms `:r=`, `:<=`)

Set the `right` CSS property of the paragraph to adjust its position.

#### `:width=` (alternative form `:w=`)

Set the `width` CSS property of the paragraph to adjust its width.

Examples:

```
:width=640px
This paragraph has a width of only 640px.

:l=20%,w=60% This paragraph has CSS properties `left: 20%; width: 60%`.
```

There are some shortcut commands for setting CSS `left`/`right` that you may use for convenient indentation:

```
:>-- I'm about 12.5% to the left.

:<---- I'm about 25% to the right.
```

### Line Breaking and Spacing

These commands are *inline commands*. An *inline command* may appear anywhere in a paragraph and takes effect wherever it appears.

#### `:linebreak` (alternative forms `:l`, `:|`)

Insert a hard line break.

#### `:linebreak=` (alternative form `:l=`)

Insert a number of hard line breaks.

#### `:nbsp` (alternative forms `:n`, `:-`)

Insert a non-breaking space.

#### `:nbsp=` (alternative form `:n=`)

Insert a number of non-breaking spaces.

There are some shortcut commands for inserting line breaks and spaces:

```
Look, two line breaks :|| are inside me!

Look, I got three more non-breaking spaces :--- here.
```

### [Bidirectional Text](https://en.wikipedia.org/wiki/Bi-directional_text)

This command is a *block command*. A *block command* applies to the consecutive paragraph thus must appear in the beginning of that paragraph.

#### `:rtl`

Mark the following paragraph as [right-to-left text](https://en.wikipedia.org/wiki/Right-to-left) for rendering correctly to HTML.

Example:

```
:rtl
العربية
```

### Multi-columns

These commands are *block commands*. Furthermore, as they could take effect on multiple paragraphs, they must appear as individual paragraphs themselves.

#### `:columns[PARAMETERS]` (alternative form `:col[PARAMETERS]`)

This is where a multi-column element begins.

#### `:}columns` (alternative forms `:columns`, `:col`)

This is where a multi-column element ends.

Example: (The lorem ipsum text is displayed in 2 columns of height 100px)

```
:col[100px;2]

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
occaecat cupidatat non proident, sunt in culpa qui officia deserunt
mollit anim id est laborum.

:col
```

### String Formatting

These commands are *inline commands*. Furthermore, as they could take effect on multiple strings, they must appear inside a pair of double tildes "`~~`".

#### `:underline` (alternative forms `:u`, `:_`)

Underline some text.

#### `:color=`

Set the `color` CSS property of some text.

#### `:font=`

Set the `font-family` CSS property of some text.

#### `:font-size=`

Set the `font-size` CSS property of some text.

Examples:

```
~~:_ Look, there's an underline under me~~

~~:color=red I am a red text~~

~~:color=#fff And I am white~~

~~:font=monospace,font-size=2em I am a big monospaced string~~
```

### Image Formatting

These commands are *inline commands*. Furthermore, as they take effect on images, they must appear inside the first brackets when defining images.

#### `:width=` (alternative form `:w=`)

Set the `width` of the image.

Example:

```
![:w=50% Doge](/images/doge.jpg)
```

### Miscellaneous Elements

These commands are *inline commands*. Furthermore, they must appear in the follow-up parentheses of a link.

#### `:kbd`

Generate an HTML `<kbd>` element to identify some keyboard input.

#### `:samp`

Generate an HTML `<samp>` element to identify sample output from a computer program.

#### `:var`

Generate an HTML `<var>` element to represent a variable.

Examples:

```
Switch to next application: [Alt+Tab](:kbd)

[zsh: command not found: ifconfig](:samp)

[x](:var) = [y](:var) + 2
```

### [Ruby Characters](https://en.wikipedia.org/wiki/Ruby_character)

This extension is inspired by [a filter for ruby text](http://pandoc.org/scripting.html#a-filter-for-ruby-text).

Examples:

```
[はん](-飯)

[北](-běi)[京](-jīng)
```

### Metadata Interpolation

This extension is inspired by [pandocfilters/examples/metavars.py](https://github.com/jgm/pandocfilters/blob/master/examples/metavars.py).

Examples:

```
Today is %{date}.

Contact me [via email](%{email})
```

### Checkboxes in Lists

This extension is inspired by [GFM Task Lists](https://github.com/blog/1375%0A-task-lists-in-gfm-issues-pulls-comments).

Example:

```
Project Elephant

- [x] Open the refrigerator
- [x] Take out the giraffe
- [ ] Put in the elephant
- [ ] Close the door
```

## Changelog

* **(Current) Revision 0.1** *(2015-07-12)*
